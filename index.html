<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Max Swap –ö–∞—Ä—Ç–∞</title>
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #17212b;
}
.screen {
    display: none;
    height: 100vh;
    padding: 20px;
    box-sizing: border-box;
}
.active { display: block; }

    #pay_title {
  display: none;
}

#qrcode canvas {
    mix-blend-mode: screen;
}
    
#slideshow-container {
    position: relative;
    width: 80vw;
    max-width: 400px;
    height: 60vw;
    max-height: 300px;
    margin: 20px auto;
}

/* ... (—Ç–≤–æ–∏ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ... */

/* PROMO SECTION ‚Äî –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –æ–ø–ª–∞—Ç—ã */
#promo_section {
    margin-top:15px; 
    text-align:center; 
    display:none; /* —Å–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
}
</style>
</head>
<body>

<div id="loader"><img src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Objects/Hourglass%20Not%20Done.webp?raw=true" style="width:200px;"></div>

<!-- SCREEN 1 -->
<div id="welcome" class="screen active" style="text-align:center;">
    <!-- ... —Ç–≤–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç ... -->
    <button class="button" id="welcomeBtn"> –û—Ç–∫—Ä—ã—Ç—å Max Swap –ö–∞—Ä—Ç—É </button>
</div>

<!-- SCREEN 2 -->
<div id="choose" class="screen">
    <!-- ... —Ç–≤–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç ... -->
</div>

<!-- SCREEN 3 -->
<div id="payment" class="screen">
    <h2 id="pay_title">–í—ã–ø—É—Å–∫ Max Swap –ö–∞—Ä—Ç—ã </h2>
    <!-- ... —Ç–≤–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç ... -->
</div>

<!-- PROMO SECTION ‚Äî –≤–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –æ–ø–ª–∞—Ç—ã -->
<div id="promo_section">
    <input id="promo_input" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥" style="padding:10px; width:70%; border-radius:8px; border:1px solid #ccc;">
    <button id="promo_btn" style="margin-top:10px; padding:10px 20px; border-radius:8px; border:none; background:#6ab2f2; color:white; cursor:pointer;">
        –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
    </button>
</div>

<!-- –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ —Å—Ç–µ–∫–ª—è–Ω–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–º–æ–∫–æ–¥–∞ -->
<div id="promo_tooltip" class="tooltip-glass"></div>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ -->
<div id="confetti-container"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const screens = {
        welcome: document.getElementById('welcome'),
        choose: document.getElementById('choose'),
        payment: document.getElementById('payment')
    };
    const loader = document.getElementById('loader');
    let selected = { name: null, price: 0 };

    const wallets = {
        USDT_TRC20: "TVis1d6QARhWBQ6XZmisD2oSWGnqFM2qzX",
        USDT_ERC20: "0xaacE295640C15344C6a2DC934a3AACcD4e23cc20",
        USDT_SOL: "AVQJ4s1Y9BrtEmnH5WrxPT818YibUJsaR4uU6Aiht647",
        BTC: "bc1qrhqsqsds47hycq0zkpx8fdvwfyu0hey843lz6j",
        ETH: "0xaacE295640C15344C6a2DC934a3AACcD4e23cc20",
        LTC: "LS2Pg4V8AhaQ1FRweGUHfkBxtwFAbJ6Dpy",
        USDC: "0xaacE295640C15344C6a2DC934a3AACcD4e23cc20"
    };

    function selectOption(name, price) {
        selected = { name, price };
        document.getElementById('pay_title').innerText = name;
        document.getElementById('price_usdt').innerText = price;
        openScreen('payment');
        setTimeout(updateConversion, 500);
    }

    async function updateConversion() {
        const cur = document.getElementById("currency").value;
        const qEl = document.getElementById('qrcode');
        qEl.innerHTML = "";
        if (wallets[cur]) {
            new QRCode(qEl, { text: wallets[cur], width: 250, height: 250 });
        }
        document.getElementById('wallet_address').innerText = wallets[cur] || '‚Äî';

        if (cur.startsWith("USDT")) {
            document.getElementById('converted_amount').innerText = `${selected.price} USDT`;
            return;
        }
        try {
            const res = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,litecoin,usd-coin&vs_currencies=usd");
            const data = await res.json();
            const priceCryptoUSD = {
                BTC: data.bitcoin?.usd || null,
                ETH: data.ethereum?.usd || null,
                LTC: data.litecoin?.usd || null,
                USDC: data["usd-coin"]?.usd || null
            };
            const rate = priceCryptoUSD[cur];
            if (!rate) {
                document.getElementById('converted_amount').innerText = "–ö—É—Ä—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω";
                return;
            }
            const converted = (selected.price / rate).toFixed(6);
            document.getElementById('converted_amount').innerText = `${converted} ${cur}`;
        } catch (e) {
            document.getElementById('converted_amount').innerText = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–∞";
        }
    }

    document.getElementById('welcomeBtn').addEventListener('click', () => openScreen('choose'));
    document.querySelectorAll('#choose .option').forEach(opt => {
        opt.addEventListener('click', () => selectOption(opt.dataset.name, parseFloat(opt.dataset.price)));
    });
    document.getElementById('currency').addEventListener('change', updateConversion);
    document.getElementById('copy_address').addEventListener('click', function() {
        const text = document.getElementById('wallet_address').innerText;
        if (!text || text === '‚Äî') return;
        navigator.clipboard.writeText(text).then(() => {
            this.classList.add("copied");
            setTimeout(() => this.classList.remove("copied"), 2000);
        });
    });

    // –ü—Ä–æ–º–æ–∫–æ–¥
    const validPromos = ["MAX50", "WELCOME", "BONUS100"];
    function showPromoTooltip(message) {
        const tooltip = document.getElementById("promo_tooltip");
        tooltip.innerHTML = message;
        tooltip.classList.add("show");
        setTimeout(() => tooltip.classList.remove("show"), 3000);
    }
    function makeConfetti() {
        const container = document.getElementById("confetti-container");
        for (let i = 0; i < 150; i++) {
            const p = document.createElement("div");
            p.className = "confetti-piece";
            p.style.left = "50%";
            p.style.top = "50%";
            p.style.width = p.style.height = (3 + Math.random() * 3) + "px";
            p.style.background = ["#ff4757","#ffa502","#2ed573","#1e90ff","#ff6b81","#eccc68"][Math.floor(Math.random()*6)];
            container.appendChild(p);
            const duration = 1200 + Math.random() * 1200;
            const dx = (Math.random()-0.5) * window.innerWidth;
            const dy = (Math.random()-0.5) * window.innerHeight;
            p.animate([{ transform: "translate(0,0)", opacity:1 }, { transform: `translate(${dx}px,${dy}px) rotate(720deg)`, opacity:0 }], { duration, easing:"cubic-bezier(0.15,0.45,0.3,1)" });
            setTimeout(() => p.remove(), duration);
        }
    }
    document.getElementById("promo_btn").addEventListener("click", () => {
        const code = document.getElementById("promo_input").value.trim().toUpperCase();
        if(validPromos.includes(code)){
            makeConfetti();
            showPromoTooltip(`üéâ –ü—Ä–æ–º–æ–∫–æ–¥ "${code}" –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!`);
        } else {
            showPromoTooltip(`‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥`);
        }
    });

    // –°–ª–∞–π–¥—ã
    const slides = document.querySelectorAll(".slide");
    let index = 0;
    const total = slides.length;
    function nextSlide() {
        const current = slides[index];
        current.classList.remove("active");
        current.classList.add("out");
        index = (index + 1) % total;
        const next = slides[index];
        next.classList.remove("out");
        next.classList.add("active");
    }
    setInterval(nextSlide, 3000);

    // Tooltip
    document.querySelectorAll('.tooltip').forEach(t => {
        t.addEventListener('click', function(e) {
            const tooltipText = this.querySelector('.tooltiptext');
            this.classList.add('show');
            setTimeout(() => { this.classList.remove('show'); }, 9000);
        });
    });

    // –û—Ç–∫—Ä—ã—Ç–∏–µ —ç–∫—Ä–∞–Ω–∞
    function openScreen(id) {
        Object.values(screens).forEach(s => s.classList.remove('active'));
        loader.style.display = 'flex';
        setTimeout(() => {
            loader.style.display = 'none';
            screens[id].classList.add('active');

            // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ–º–æ –±–ª–æ–∫
            const promo = document.getElementById('promo_section');
            promo.style.display = (id === 'payment') ? 'block' : 'none';
        }, 900);
    }

});
</script>

</body>
</html>
