<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Max Swap –ö–∞—Ä—Ç–∞</title>
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #17212b;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    color: white;
}
.screen {
    display: none;
    height: 100vh;
    padding: 20px;
    box-sizing: border-box;
}
.active { display: block; }

#qrcode canvas { mix-blend-mode: screen; }

#slideshow-container{
    position: relative;
    width: 80vw; max-width:400px;
    height: 60vw; max-height:300px;
    margin:20px auto;
}

/* —Å–ª–∞–π–¥–µ—Ä/–ø—Ä–æ–º–æ (–µ–¥–∏–Ω—ã–π –±–ª–æ–∫) */
#promo_block {
  margin-top: 18px;
  text-align: center;
}

/* –ø–æ–ª–µ –≤–≤–æ–¥–∞ */
#promo_input{
  width:84vw; max-width:360px;
  padding:14px 16px;
  font-size:18px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,0.06);
  background:#0b1116;
  color:white;
  outline:none;
  box-sizing:border-box;
  text-align:center;
}

/* —Å–ª–∞–π–¥–µ—Ä-—Ä–∞–º–∫–∞ */
#slider_wrapper{
  width:84vw; max-width:360px;
  height:64px;
  margin:12px auto 0;
  border-radius:40px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  display:none; /* show when typing */
  position:relative;
  box-shadow: 0 6px 18px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
  overflow:hidden;
  border:1px solid rgba(255,255,255,0.04);
}

#slider_text{
  position:absolute; left:0; right:0; top:0; bottom:0;
  display:flex; align-items:center; justify-content:center;
  font-size:15px; color:#9fb8d8; pointer-events:none;
  user-select:none;
}

/* knob */
#slider_knob{
  position:absolute;
  left:6px; top:6px;
  width:52px; height:52px; border-radius:50%;
  background:#6ab2f2;
  display:flex;align-items:center;justify-content:center;
  font-size:20px;
  color:#022033;
  touch-action:none;
  user-select:none;
  box-shadow: 0 8px 18px rgba(78,167,255,0.14);
  transition: box-shadow .18s ease;
}
#slider_knob:active{ box-shadow: 0 6px 12px rgba(78,167,255,0.08); }

/* —Å—Ç–µ–∫–ª—è–Ω–Ω—ã–π —Ç—É–ª—Ç–∏–ø */
.tooltip-glass{
  position:fixed;
  left:50%; top:40%;
  transform:translate(-50%,-50%);
  min-width:200px;
  max-width:90vw;
  padding:14px 18px;
  border-radius:14px;
  background: rgba(255,255,255,0.10);
  backdrop-filter: blur(10px);
  border:1px solid rgba(255,255,255,0.18);
  color:#002233;
  text-align:center;
  z-index:9999;
  font-weight:600;
  box-shadow: 0 10px 30px rgba(0,0,0,0.6);
}

/* –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ */
#confetti-container{
  pointer-events:none;
  position:fixed; inset:0; z-index:9998; overflow:hidden;
}
.confetti-piece{
  position:absolute;
  will-change: transform, opacity;
  border-radius:2px;
}

/* –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ (–∫–∞–∫ –±—ã–ª–∏) */
.slide { position: absolute; top:50%; left:50%; width:100%; height:100%; object-fit:contain; border-radius:12px; transform:translate(-50%,-50%) scale(.9); opacity:0; transition:opacity .15s, transform .15s; }
.slide.active { opacity:1; transform:translate(-50%,-50%) scale(1); }
.button { width:75vw; margin:20px auto 0; padding:15px; font-size:18px; text-align:center; background:#2f6ea5; color:#fff; border:none; border-radius:6px; display:block; }

.option { background:#253648; padding:12px; border-radius:12px; margin-top:15px; display:flex; gap:12px; align-items:center; cursor:pointer; }
.option img { width:50px; height:50px; border-radius:8px; }
.desc { font-size:13px; margin-top:4px; color:white; }

#loader { position: fixed; top:0; left:0; width:100%; height:100%; background:#17212b; display:none; color:white; justify-content:center; align-items:center; font-size:22px; }

#payment { font-size:15px; flex-direction:column; align-items:center; text-align:center; color:white; }
#payment.active { display:flex !important; flex-direction:column; align-items:center; text-align:center; }

.address-box { max-width:75vw; padding:12px; border:2px dashed #6ab2f2; border-radius:4px; word-wrap:break-word; text-align:center; font-size:10px; cursor:pointer; background: transparent; }
</style>
</head>
<body>

<div id="loader"><img src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Objects/Hourglass%20Not%20Done.webp?raw=true" style="width:200px;"></div>

<!-- SCREEN 1 -->
<div id="welcome" class="screen active" style="text-align:center;">
  <div style="width:100%; text-align:center;">
    <br><br><br>
    <div id="slideshow-container">
      <img class="slide active" src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Objects/Shopping%20Bags.webp?raw=true">
      <img class="slide" src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Objects/Purse.webp?raw=true">
      <img class="slide" src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Objects/Shopping%20Cart.webp?raw=true">
    </div>
  </div>

  <div style="text-align:center; color:white">
    <div style="color:#6ab2f2"> <b>–û—Ç–∫—Ä–æ–π—Ç–µ –º–∏—Ä –±–µ–∑ –≥—Ä–∞–Ω–∏—Ü —Å Max Swap!</b></div> <br>
    –°–æ–≤–µ—Ä—à–∞–π—Ç–µ –ø–æ–∫—É–ø–∫–µ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ... <p> <b>–ë—ã—Å—Ç—Ä–æ, –∞–Ω–æ–Ω–∏–º–Ω–æ –∏ –±–µ–∑ —Å–∫—Ä—ã—Ç—ã—Ö –∫–æ–º–∏—Å—Å–∏–π.</b></p>
  </div >
  <button class="button" id="welcomeBtn"> –û—Ç–∫—Ä—ã—Ç—å Max Swap –ö–∞—Ä—Ç—É </button>
</div>

<!-- SCREEN 2 -->
<div id="choose" class="screen">
  <img src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Objects/Identification%20Card.webp?raw=true" style="width:200px; display:block; margin:0 auto;">
  <div style="text-align:center; color:white; font-weight:bold;">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∫–∞—Ä—Ç—ã –¥–ª—è –≤—ã–ø—É—Å–∫–∞:</div>

  <div class="option" data-name="Max Swap Online Card" data-price="52.5">
    <img src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Objects/Laptop.webp?raw=true" alt="">
    <div>
      <div style="color:#6ab2f2"> Max Swap Online Card - 52.5 USDT</div>
      <div class="desc">–ü–æ–¥–æ–π–¥—ë—Ç –¥–ª—è –ø–æ–∫—É–ø–æ–∫ ...</div>
    </div>
  </div>

  <div class="option" data-name="Max Swap NFC Card" data-price="52.5">
    <img src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Objects/Shopping%20Cart.webp?raw=true" alt="">
    <div>
      <div style="color:#6ab2f2"> Max Swap NFC Card - 52.5 USDT</div>
      <div class="desc">–ü–æ–¥–æ–π–¥—ë—Ç –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –∫ GooglePay/ApplePay ...</div>
    </div>
  </div>

  <div class="option" data-name="Max Swap Ultima" data-price="99">
    <img src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Symbols/New%20Button.webp?raw=true" alt="">
    <div>
      <div style="color:#6ab2f2">Max Swap Ultima - 99 USDT</div>
      <div class="desc">–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –¥–≤—É—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø—É–Ω–∫—Ç–æ–≤...</div>
    </div>
  </div>
</div>

<!-- SCREEN 3 -->
<div id="payment" class="screen">
  <h2 id="pay_title" style="display:none">–í—ã–ø—É—Å–∫ Max Swap –ö–∞—Ä—Ç—ã </h2>
  <img src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Objects/Money%20Bag.webp?raw=true" style="width:200px;">
  <div style="color:#6ab2f2; width:80%; margin:0 auto; text-align:center; margin-bottom:7px">
    <b>–°—Ç–æ–∏–º–æ—Å—Ç—å –≤—ã–ø—É—Å–∫–∞ –∫–∞—Ä—Ç—ã: <b id="price_usdt"></b> USD</b>
  </div>

  <div style=" margin-bottom:7px"> <label>–í—ã–±–µ—Ä–∏—Ç–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É –¥–ª—è –æ–ø–ª–∞—Ç—ã:</label></div>
  <select id="currency">
    <option value="USDT_TRC20">USDT TRC-20</option>
    <option value="USDT_ERC20">USDT ERC-20</option>
    <option value="USDC">USDC ERC-20</option>
    <option value="USDT_SOL">USDT SOL</option>
    <option value="BTC">BTC</option>
    <option value="ETH">ETH</option>
    <option value="LTC">LTC</option>
  </select>

  <div style="color:#6ab2f2; margin-bottom:7px"> <b>–°—É–º–º–∞ –≤ —ç—Ç–æ–π –≤–∞–ª—é—Ç–µ:</b> <b id="converted_amount">...</b></div>

  <div style="margin-bottom:7px">
    <div class="glass-status-btn" style="display:inline-block; padding:6px 10px;">
      <img src="https://github.com/Tarikul-Islam-Anik/Telegram-Animated-Emojis/blob/main/Objects/Magnifying%20Glass%20Tilted%20Right.webp?raw=true" style="width:20px; vertical-align:middle">
      –°—Ç–∞—Ç—É—Å: –æ–∂–∏–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã [?]
    </div>
  </div>

  <div class="address-box" id="copy_address">
    <b id="wallet_address">...</b>
  </div>

  <br>
  <div class="qr-glow-wrapper">
    <div id="qrcode"><canvas style="mix-blend-mode: screen;"></canvas></div>
  </div>

  <!-- PROMO + SLIDER ‚Äî –ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô –ë–õ–û–ö -->
  <div id="promo_block">
    <div style="margin-top:18px;">
      <input id="promo_input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥" autocomplete="off" autocapitalize="characters" />
    </div>

    <div id="slider_wrapper" aria-hidden="true">
      <div id="slider_text">–ü—Ä–æ–≤–µ–¥–∏—Ç–µ –≤–ø—Ä–∞–≤–æ, —á—Ç–æ–±—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</div>
      <div id="slider_knob" role="button" aria-label="Slide to confirm">‚Üí</div>
    </div>
  </div>

</div>

<!-- –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
<div id="confetti-container"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
/* ---------- –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ---------- */
const VALID = ["MAX50","WELCOME","BONUS100","TESTCODE"]; // —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ (UPPERCASE)
const SLIDE_COMPLETE_THRESHOLD = 0.92; // –ø–æ—Ä–æ–≥ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∫–æ–Ω—Ü–∞ (0..1)
/* -------------------------------- */

document.addEventListener('DOMContentLoaded', () => {

  // --- SCREENS / UI ---
  const screens = {
    welcome: document.getElementById('welcome'),
    choose: document.getElementById('choose'),
    payment: document.getElementById('payment')
  };
  const loader = document.getElementById('loader');
  let selected = { name: null, price: 0 };

  const wallets = {
    USDT_TRC20: "TVis1d6QARhWBQ6XZmisD2oSWGnqFM2qzX",
    USDT_ERC20: "0xaacE295640C15344C6a2DC934a3AACcD4e23cc20",
    USDT_SOL: "AVQJ4s1Y9BrtEmnH5WrxPT818YibUJsaR4uU6Aiht647",
    BTC: "bc1qrhqsqsds47hycq0zkpx8fdvwfyu0hey843lz6j",
    ETH: "0xaacE295640C15344C6a2DC934a3AACcD4e23cc20",
    LTC: "LS2Pg4V8AhaQ1FRweGUHfkBxtwFAbJ6Dpy",
    USDC: "0xaacE295640C15344C6a2DC934a3AACcD4e23cc20"
  };

  function openScreen(id) {
    Object.values(screens).forEach(s => s.classList.remove('active'));
    loader.style.display = 'flex';
    setTimeout(() => {
      loader.style.display = 'none';
      screens[id].classList.add('active');
    }, 300);
  }

  function selectOption(name, price) {
    selected = { name, price };
    document.getElementById('pay_title').innerText = name;
    document.getElementById('price_usdt').innerText = price;
    openScreen('payment');
    setTimeout(updateConversion, 300);
  }

  async function updateConversion() {
    const cur = document.getElementById("currency").value;
    const qEl = document.getElementById('qrcode');
    qEl.innerHTML = "";
    if (wallets[cur]) {
      new QRCode(qEl, { text: wallets[cur], width: 250, height: 250 });
    }
    document.getElementById('wallet_address').innerText = wallets[cur] || '‚Äî';
    if (cur.startsWith("USDT")) {
      document.getElementById('converted_amount').innerText = `${selected.price} USDT`;
      return;
    }
    try {
      const res = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,litecoin,usd-coin&vs_currencies=usd");
      const data = await res.json();
      const priceCryptoUSD = {
        BTC: data.bitcoin?.usd || null,
        ETH: data.ethereum?.usd || null,
        LTC: data.litecoin?.usd || null,
        USDC: data["usd-coin"]?.usd || null
      };
      const rate = priceCryptoUSD[cur];
      if (!rate) { document.getElementById('converted_amount').innerText = "–ö—É—Ä—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"; return; }
      const converted = (selected.price / rate).toFixed(6);
      document.getElementById('converted_amount').innerText = `${converted} ${cur}`;
    } catch (e) {
      console.warn(e);
      document.getElementById('converted_amount').innerText = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–∞";
    }
  }

  // handlers
  document.getElementById('welcomeBtn').addEventListener('click', () => openScreen('choose'));
  document.querySelectorAll('#choose .option').forEach(opt => {
    opt.addEventListener('click', () => selectOption(opt.dataset.name, parseFloat(opt.dataset.price)));
  });
  document.getElementById('currency').addEventListener('change', updateConversion);
  document.getElementById('copy_address').addEventListener('click', function() {
    const text = document.getElementById('wallet_address').innerText;
    if (!text || text === '‚Äî') return;
    navigator.clipboard.writeText(text).then(() => {
      this.classList.add("copied");
      setTimeout(() => this.classList.remove("copied"), 1500);
    }).catch(()=>{});
  });

  // --- SLIDER & PROMO logic ---
  const input = document.getElementById('promo_input');
  const sliderWrapper = document.getElementById('slider_wrapper');
  const knob = document.getElementById('slider_knob');
  const sliderText = document.getElementById('slider_text');
  const confettiContainer = document.getElementById('confetti-container');

  let sliderVisible = false;
  let activePointer = null;
  let startX = 0;
  let startLeft = 0;

  function maxLeft(){
    const pad = 6;
    return Math.max(6, sliderWrapper.clientWidth - knob.clientWidth - pad);
  }
  function resetKnob(){
    knob.style.transition = 'left .25s cubic-bezier(.2,.9,.2,1)';
    knob.style.left = '6px';
    setTimeout(()=> knob.style.transition = 'none', 300);
  }
  function resetKnobImmediate(){
    knob.style.transition = 'none';
    knob.style.left = '6px';
  }

  input.addEventListener('input', () => {
    const v = input.value.trim();
    if (v.length >= 1) {
      if (!sliderVisible) {
        sliderWrapper.style.display = 'block';
        sliderWrapper.setAttribute('aria-hidden','false');
        sliderVisible = true;
      }
    } else {
      sliderWrapper.style.display = 'none';
      sliderWrapper.setAttribute('aria-hidden','true');
      sliderVisible = false;
      resetKnobImmediate();
    }
  });

  // pointer drag
  knob.addEventListener('pointerdown', (evt) => {
    evt.preventDefault();
    knob.setPointerCapture(evt.pointerId);
    activePointer = evt.pointerId;
    startX = evt.clientX;
    startLeft = clamp(parseFloat(getComputedStyle(knob).left) || 6, 6, maxLeft());
    knob.style.transition = 'none';
  });

  document.addEventListener('pointermove', (evt) => {
    if (activePointer !== evt.pointerId) return;
    evt.preventDefault();
    const dx = evt.clientX - startX;
    let newLeft = startLeft + dx;
    newLeft = Math.max(6, Math.min(newLeft, maxLeft()));
    knob.style.left = newLeft + 'px';
  });

  document.addEventListener('pointerup', (evt) => {
    if (activePointer !== evt.pointerId) return;
    knob.releasePointerCapture(evt.pointerId);
    activePointer = null;
    const left = parseFloat(getComputedStyle(knob).left);
    const ratio = left / maxLeft();
    if (ratio >= SLIDE_COMPLETE_THRESHOLD) {
      knob.style.left = maxLeft() + 'px';
      knob.style.transition = 'left .15s ease';
      onSlideComplete();
    } else {
      resetKnob();
    }
  });

  function clamp(v,a,b){ return Math.max(a, Math.min(b, v)); }

  function onSlideComplete(){
    const code = (input.value || '').trim().toUpperCase();
    const ok = VALID.includes(code);

    if (ok) {
      showTooltip('üéâ –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–Ω—è—Ç!');
      launchConfetti();
    } else {
      showTooltip('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥');
    }

    setTimeout(()=> resetKnob(), 420);
  }

  // tooltip management
  let currentTooltip = null;
  function showTooltip(text){
    removeTooltip();
    const t = document.createElement('div');
    t.className = 'tooltip-glass';
    t.innerHTML = text;
    document.body.appendChild(t);
    currentTooltip = t;

    function onDocClick(){
      removeTooltip();
      document.removeEventListener('pointerdown', onDocClick);
    }
    setTimeout(()=> document.addEventListener('pointerdown', onDocClick), 50);
  }
  function removeTooltip(){
    if (!currentTooltip) return;
    currentTooltip.remove();
    currentTooltip = null;
  }

  // confetti
  function launchConfetti(){
    removeConfetti();
    const count = 120;
    for (let i=0;i<count;i++){
      const el = document.createElement('div');
      el.className = 'confetti-piece';
      const w = 6 + Math.random()*10;
      el.style.width = w + 'px';
      el.style.height = (4 + Math.random()*6) + 'px';
      el.style.left = (50 + (Math.random()-0.5)*30) + '%';
      el.style.top = '30%';
      const colors = ['#ff4757','#ffa502','#2ed573','#1e90ff','#ff6b81','#eccc68'];
      el.style.background = colors[Math.floor(Math.random()*colors.length)];
      el.style.opacity = '1';
      confettiContainer.appendChild(el);

      const angle = (Math.random()*Math.PI*2);
      const distX = Math.cos(angle) * (200 + Math.random()*500);
      const distY = Math.sin(angle) * (200 + Math.random()*500);
      const rot = (Math.random()>0.5?1:-1) * (360 + Math.random()*720);

      el.animate([
        { transform:`translate(0px,0px) rotate(0deg)`, opacity:1 },
        { transform:`translate(${distX}px, ${distY}px) rotate(${rot}deg)`, opacity:0 }
      ], {
        duration: 900 + Math.random()*900,
        easing: 'cubic-bezier(.2,.7,.2,1)'
      });

      setTimeout(()=> el.remove(), 2200);
    }
    setTimeout(removeConfetti, 4000);
  }
  function removeConfetti(){ confettiContainer.innerHTML = ''; }

  // close tooltip/confetti on doc click (if present)
  document.addEventListener('pointerdown', (e) => {
    if (currentTooltip) removeTooltip();
  });

  // prevent drag ghost on knob
  knob.addEventListener('dragstart', e=> e.preventDefault());

  // accessibility: Enter to quick test (optional)
  input.addEventListener('keydown', (e)=>{
    if (e.key === 'Enter' && input.value.trim().length>0){
      if (!sliderVisible) {
        sliderWrapper.style.display='block';
        sliderVisible=true;
        setTimeout(()=> {
          knob.style.transition='left .15s ease';
          knob.style.left = maxLeft() + 'px';
          setTimeout(()=> onSlideComplete(), 160);
        }, 120);
      }
    }
  });

  // slideshow (small)
  const slides = document.querySelectorAll(".slide");
  let sIndex = 0;
  const sTotal = slides.length;
  function nextSlide() {
    const current = slides[sIndex];
    current.classList.remove("active");
    current.classList.add("out");
    sIndex = (sIndex + 1) % sTotal;
    const next = slides[sIndex];
    next.classList.remove("out");
    next.classList.add("active");
  }
  setInterval(nextSlide, 3000);

}); // DOMContentLoaded end

</script>
</body>
</html>
